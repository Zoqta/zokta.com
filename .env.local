CREATE TABLE waitlist (
  id SERIAL PRIMARY KEY,
  first_name VARCHAR(100) NOT NULL,
  last_name VARCHAR(100) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  company VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  source VARCHAR(50) DEFAULT 'website',
  status VARCHAR(20) DEFAULT 'pending'
);

-- Enable Row Level Security
ALTER TABLE waitlist ENABLE ROW LEVEL SECURITY;

-- Create policy to allow inserts from authenticated and anonymous users
CREATE POLICY "Allow anonymous inserts" ON waitlist
  FOR INSERT WITH CHECK (true);

-- Create policy to allow reads (optional - for admin purposes)
CREATE POLICY "Allow reads" ON waitlist
  FOR SELECT USING (true);